--INTO: DETERMINA A TABELA DESTINO ONDE SERÁ FEITO A INCLUSÃO OU ATUALIZAÇÃO
--USING: DETERMINA O DADO (ORIGEM) QUE SERÁ INCLUÍDO OU ATUALIZADO
--WHEN MATCHED / NOT MATCHED: DETERMINA A CONDIÇÃO A SER AVALIADA PARA INCLUSÃO OU ATUALIZAÇÃO
--QUANDO A CONDIÇÃO FOR VERDADEIRA OCORRERÁ A ATUALIZAÇÃO, CASO CONTRÁRIO SERÁ FEITO O INSERTE

--INSERT SEM CONDIÇÃO
INSERT ALL
INTO *TABELA1*(COD, NOME, VALOR)
INTO *TABELA2*(COD, NOME, VALOR)
SELECT COD + 50, 'INSERT ALL', 1013
FROM *TABELA3*
WHERE COD = &CODIGO;

--INSERT ALL COM CONDIÇÃO
INSERT ALL
WHEN TOTAL>= 1000 THEN
INTO *TABELA*(COD, NOME, VALOR)
VALUES(SEQ_NOME.NEXTVAL, 'CURSO > 1000', TOTAL)
WHEN DESCONTO IS NULL THEN
INTO *TABELA* (COD, NOME, VALOR)
VALUES (SEQ_NOME.NEXTVAL, 'DESCONTO IS NULL', TOTAL)
SELECT COD, TOTAL, DESCONTO
FROM *TABELA* WHERE COD = &CODIGO;

--MERGE É UTILIZADO PARA FAZER O INSERT DE VÁRIAS TABELAS A PARTIR DE UMA DETERMINADA TABELA
MERGE INTO *TABELA1* T1
USING (SELECT COD2 FROM *TABELA2* WHERE ESTADO = 'RS')ON
(T1.COD2 = COD1)
WHEN MATCHED THEN --ENCONTROU O REGISTRO
UPDATE SET DESCONTO = 22
WHEN NOT MATCHED THEN --NÃO ENCONTROU REGISTRO
INSERT (T1. COD, T1.DATA, T1.DESCONTO, T1.TOTAL)
VALUES(SEQ_NOME.NEXTVAL, SYSDATE, 0, 540);