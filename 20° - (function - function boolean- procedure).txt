
CREATE OR REPLACE FUNCTION CONSULTA_PRECO
(PCOD_CURSO NUMBER)
RETURN NUMBER
AS 
VVALOR NUMBER;
BEGIN
SELECT VALOR FROM INTO VVALOR FROM *TABELA*
WHERE COD_CURSO = PCOD_CURSO;

RETURN(VVALOR);
END;

DECLARE
VCOD NUMBER := &CODIGO;
VVALOR NUMBER;
BEGIN
VVALOR := CONSULTA_PRECO(VCOD);
Dbms_Output.Put_Line('PREÇO DO CURSO: '||VVALOR);
END;
------------------------------------------------

--PARTE 1:
--FUNCTION DE RETORNO TRUE OU FALSE
CREATE OR REPLACE FUNCTION EXISTE_ALUNO
(PCOD_ALUNO IN *TABELA*.COD_ALUNO%TYPE)
RETURN BOOLEAN --IRÁ RETORNAR TRUE OR FALSE
IS
VALUNO NUMBER(10);
BEGIN
SELECT COD_ALUNO
INTO VALUNO
FROM *TABELA*
WHERE COD_ALUNO = PCOD_ALUNO;
RETURN(TRUE);
EXCEPTION
WHEN OTHERS THEN
RETURN(FALSE);
END;

DECLARE
VCODIGO INTEGER := &CODIGO;
BEGIN
IF EXISTE_ALUNO(VCODIGO) THEN
Dbms_Output.Put_Line('CÓDIGO ENCONTRADO');
ELSE
Dbms_Output.Put_Line('CÓDIGO NÃO ENCONTRADO');
END IF;
END;
--------------------------------------------------

--PARTE 2:
CREATE OR REPLACE PROCEDURE CADATRO_ALUNO
(PCOD_ALUNO IN *TABELA*.COD_ALUNO%TYPE,
PNOME IN *TABELA*.NOME%TYPE,
PCIDADE IN *TABELA*.CIDADE%TYPE,
PESTATO IN *TABELA*.ESTADO%TYPE) IS
BEGIN
IF(NOT EXISTE_ALUNO(PCOD_ALUNO)) THEN --VERIFICA SE NÃO EXISTE O CÓDIGO DE ALUNO, ENTÃO INSERE OS VALORES
INSERT INTO *TABELA*(COD_ALUNO, NOME, CIDADE, ESTADO)
VALUES (PCOD_ALUNO, PNOME, PCIDADE, PESTADO);
Dbms_Output.Put_Line('CÓDIGO CADASTRADO COM SUCESSO');
ELSE
Dbms_Output.Put_Line('CÓDIGO JÁ CADASTRADO');
END IF;
END;

--NESTE CASO, COMO NÃO TEM NENHUMA DECLARAÇÃO A PASSAR, O "DECLARE" NÃO PRECISA SER CITADO
BEGIN
CADASTRO_ALUNO(NOME_SEQUENCE.NEXTVAL, 'PAULO', 'SÃO PAULO', 'SP');
END;
